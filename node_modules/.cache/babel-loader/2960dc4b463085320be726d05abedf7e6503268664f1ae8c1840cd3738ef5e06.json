{"ast":null,"code":"var _jsxFileName = \"/Users/monika/Downloads/01-starting-project/src/components/Expense/Expenses.js\",\n  _s = $RefreshSig$();\nimport ExpenseFilter from \"../ExpenseFilter/ExpenseFilter\";\nimport ExpenseItem from \"./ExpenseItem\";\nimport React, { useEffect, useState, useReducer } from \"react\";\nimport ExpensesChart from \"./ExpensesChart\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction taskreducer(allExpense, action) {\n  switch (action.type) {\n    case 'add':\n      {\n        return [...allExpense, action.exp];\n      }\n    case 'edit':\n      {\n        return allExpense.map(exp => {\n          if (exp.id === action.exp.id) {\n            return action.exp;\n          } else {\n            return exp;\n          }\n        });\n      }\n    case 'delete':\n      {\n        return allExpense.filter(exp => exp.id !== action.id);\n      }\n    default:\n      {\n        throw Error(\"Unknown action: \" + action.type);\n      }\n  }\n}\nconst Expenses = props => {\n  _s();\n  const [filteredExpense, setFilteredExpense] = useState([]);\n  const [date, setSelectedDate] = useState();\n  const [allExpense, dispatch] = useReducer(taskreducer, props.expense);\n  const [lengthE, setLength] = useState(allExpense.length);\n  const getFilteredDate = selectedDate => {\n    setSelectedDate(selectedDate);\n    let arr = allExpense.filter(key => key.date.getFullYear().toString() === selectedDate);\n    if (selectedDate === \"all\") {\n      arr = allExpense;\n    }\n    setFilteredExpense(arr);\n  };\n\n  //useEffect to run only at the start of the application\n  useEffect(() => {\n    getFilteredDate('all');\n  }, []);\n\n  //useEffect to re-render the component immediately as new expense is added.\n\n  useEffect(() => {\n    getFilteredDate(date);\n  }, [allExpense]);\n  const handleChange = expense => {\n    dispatch({\n      type: 'edit',\n      exp: expense\n    });\n  };\n  if (lengthE !== props.expense.length) {\n    console.log(`${lengthE} ${props.expense.length} ${allExpense.length}`);\n    dispatch({\n      type: 'add',\n      exp: props.newData\n    });\n    setLength(props.expense.length);\n  }\n  const handleDelete = id => {\n    console.log(`${allExpense} now ${id}`);\n    dispatch({\n      type: 'delete',\n      id: id\n    });\n    props.modifiedData(id);\n  };\n\n  // console.log(`this is the last array I directly received after updating `)\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(ExpenseFilter, {\n      getFilteredDate: getFilteredDate\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ExpensesChart, {\n      expense: filteredExpense\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ExpenseItem, {\n      arr: filteredExpense,\n      onchange: handleChange,\n      ondelete: handleDelete\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n};\n_s(Expenses, \"RreZagKxX/gclF4XI9caFIWPFZw=\");\n_c = Expenses;\nexport default Expenses;\nvar _c;\n$RefreshReg$(_c, \"Expenses\");","map":{"version":3,"names":["ExpenseFilter","ExpenseItem","React","useEffect","useState","useReducer","ExpensesChart","jsxDEV","_jsxDEV","taskreducer","allExpense","action","type","exp","map","id","filter","Error","Expenses","props","_s","filteredExpense","setFilteredExpense","date","setSelectedDate","dispatch","expense","lengthE","setLength","length","getFilteredDate","selectedDate","arr","key","getFullYear","toString","handleChange","console","log","newData","handleDelete","modifiedData","children","fileName","_jsxFileName","lineNumber","columnNumber","onchange","ondelete","_c","$RefreshReg$"],"sources":["/Users/monika/Downloads/01-starting-project/src/components/Expense/Expenses.js"],"sourcesContent":["import ExpenseFilter from \"../ExpenseFilter/ExpenseFilter\";\nimport ExpenseItem from \"./ExpenseItem\";\nimport React, { useEffect, useState, useReducer } from \"react\";\nimport ExpensesChart from \"./ExpensesChart\";\n\nfunction taskreducer(allExpense, action) {\n  switch (action.type) {\n    case 'add' :{\n      return ([...allExpense,action.exp])\n    }\n    case 'edit': {\n      return allExpense.map((exp) => {\n        if (exp.id === action.exp.id) {\n          return action.exp;\n        }else{\n          return exp;\n        }\n      });\n    }\n    case 'delete': {\n      return allExpense.filter((exp) => exp.id !== action.id);\n    }\n    default: {\n      throw Error(\"Unknown action: \" + action.type);\n    }\n  }\n}\n\nconst Expenses = (props) => {\n  const [filteredExpense, setFilteredExpense] = useState([]);\n  const [date, setSelectedDate] = useState();\n  const [allExpense, dispatch] = useReducer(taskreducer, props.expense);\n  const [lengthE, setLength] =useState(allExpense.length);\n\n  const getFilteredDate = (selectedDate) => {\n    setSelectedDate(selectedDate);\n    let arr = allExpense.filter(\n      (key) => key.date.getFullYear().toString() === selectedDate\n    );\n    if (selectedDate === \"all\") {\n      arr = allExpense;\n    }\n    setFilteredExpense(arr);\n  };\n\n  //useEffect to run only at the start of the application\n  useEffect(()=>{\n    getFilteredDate('all');\n  },[])\n\n  //useEffect to re-render the component immediately as new expense is added.\n\n  useEffect(() => {\n    getFilteredDate(date);\n  }, [allExpense]);\n\n  const handleChange =(expense)=>{\n    dispatch({\n      type:'edit',\n      exp:expense\n    })\n  }\n\n  if(lengthE!==props.expense.length){\n    console.log(`${lengthE} ${props.expense.length} ${allExpense.length}`)\n    dispatch({\n      type:'add',\n      exp:props.newData\n    })\n    setLength(props.expense.length);\n  }\n\n  const handleDelete =(id)=>{\n    console.log(`${allExpense} now ${id}`)\n    dispatch({\n      type:'delete',\n      id:id\n    })\n    props.modifiedData(id);\n  }\n\n  // console.log(`this is the last array I directly received after updating `)\n\n  return (\n    <div>\n      <ExpenseFilter getFilteredDate={getFilteredDate} />\n      <ExpensesChart expense={filteredExpense} />\n      <ExpenseItem arr={filteredExpense} onchange={handleChange} ondelete={handleDelete}/>\n    </div>\n  );\n};\nexport default Expenses;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}